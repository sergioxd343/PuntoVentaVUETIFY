<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<CatalogoProveedores>
    <tablaPrincipal>
		<query>
			SELECT * FROM evento_programado
		</query>
	</tablaPrincipal>

	<tablaParticipantes>
		<query>
			SELECT TOP (200) 
			evento_programado_grupo.cve_empleado, persona.nombre + ' ' + persona.apellido_peterno + ' ' + persona.apellido_materno AS nombre, 
			evento_programado.nombre_evento
			FROM evento_programado_grupo
			INNER JOIN evento_programado ON evento_programado_grupo.cve_even_prog = evento_programado.cve_even_prog
			INNER JOIN empleado ON evento_programado_grupo.cve_empleado = empleado.cve_empleado
			INNER JOIN persona ON empleado.cve_persona = persona.cve_persona
			WHERE evento_programado.cve_even_prog = ?
		</query>
	</tablaParticipantes>

    <guardarUsuario>
		<query>
			
			INSERT INTO usuario (idTipoUsuario, nombre, fecha, activo) VALUES (?,?,?,1) 

		</query>
	</guardarUsuario>
    <tipoPuesto>
		<query>
	SELECT idAcademia, nombreAcademia
FROM     academia

		</query>
	</tipoPuesto>
    <editarProveedor>
		<query>
			DECLARE @pass VARCHAR(6) = ?;
			DECLARE @cv_usuario INT = ?;

			UPDATE usuario
			SET 
				idTipoUsuario = ?,
				nombreUsuario = ?,
				fecha = ?

			WHERE cv_usuario  = @cv_usuario

			IF (SELECT password FROM usuario WHERE cv_usuario = @cv_usuario) IS NULL
			BEGIN
				UPDATE usuario SET password = @pass WHERE cv_usuario = @cv_usuario
			END
		</query>
	</editarProveedor>
    <eliminarProveedor>
		<query>
			DELETE FROM proveedor WHERE cve_proveedor = ?
		</query>
	</eliminarProveedor>

	

</CatalogoProveedores>