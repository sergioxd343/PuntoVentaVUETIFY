<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<CatalogoProveedores>

	<unidadAcademica>
		<query>
			SELECT cve_unidad_academica, nombre_unidad_academica FROM unidad_academica
		</query>
	</unidadAcademica>

	<tipoEvento>
		<query>
			SELECT cve_tipo_evento, nombre_tipo_evento FROM tipo_evento
		</query>
	</tipoEvento>

    <tablaEventos>
		<query>
			SELECT unidad_academica.nombre_unidad_academica, necesidad_capacitacion_anual.nombre_evento, tipo_evento.nombre_tipo_evento, necesidad_capacitacion_anual.fecha_inicio,
			necesidad_capacitacion_anual.fecha_temino, necesidad_capacitacion_anual.num_dias
			FROM necesidad_capacitacion_anual INNER JOIN
			unidad_academica ON unidad_academica.cve_unidad_academica = necesidad_capacitacion_anual.cve_unidad_academica INNER JOIN
            tipo_evento ON tipo_evento.cve_tipo_evento = necesidad_capacitacion_anual.cve_tipo_evento
		</query>
	</tablaEventos>

    <guardarEvento>
		<query>
			INSERT INTO necesidad_capacitacion_anual (cve_area_registro, cve_unidad_academica, cve_nivel_academico, cve_area, 
			cve_departamento, cve_empleado_responsable, cve_orientacion_evento, cve_tipo_evento, cve_tipo_capacitacion, cve_origen_evento,
			anio_ejercicio, necesidades_detectadas, nombre_evento, objetivo_evento, justificacion, otro_tipo_evento, proveedor, 
			costo_capacitacion, mes, fecha_inicio, fecha_temino, num_dias, num_horas_efectivas, participantes_ptc, participantes_laboratoristas, 
			participantes_administrativo, otros_participantes, total_participantes, total_hombres, total_mujeres, activo,
			fecha_registro, usuario_registro) 
			VALUES (1,?,1,1,1,1,1,?,1,1,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,1,?,1);
		</query>
	</guardarEvento>

    
    <editarEvento>
		<query>
						
			DECLARE @id_evento INT = ?;		
						UPDATE necesidad_capacitacion_anual
						SET 
				cve_area_registro 			= 1,
				cve_unidad_academica 		= ?,
				cve_nivel_academico 		= 1,
				cve_area 					= 1,
				cve_departamento 			= 1,
				cve_empleado_responsable 	= 1,
				cve_orientacion_evento 		= 1,
				cve_tipo_evento 			= ?,
				cve_tipo_capacitacion 		= 1,
				cve_origen_evento 			= 1,
				anio_ejercicio 				= ?,
				necesidades_detectadas 		= ?,
				nombre_evento 				= ?,
				objetivo_evento 			= ?,
				justificacion 				= ?,
				otro_tipo_evento 			= ?,
				proveedor 					= ?,
				costo_capacitacion 			= ?,
				mes 						= ?,
				fecha_inicio 				= ?,
				fecha_temino 				= ?,
				num_dias 					= ?,
				num_horas_efectivas 		= ?,
				participantes_ptc 			= ?,
				participantes_laboratoristas = ?,
				participantes_administrativo = ?,
				otros_participantes 		= ?,
				total_participantes 		= ?,
				total_hombres 				= ?,
				total_mujeres 				= ?,
				activo 						= 1,
				fecha_registro 				= ?,
				usuario_registro 			= 1
						WHERE cve_nec_cap_anual  = @id_evento
		</query>
	</editarEvento>

    <eliminarEvento>
		<query>
			BEGIN TRANSACTION
			DELETE FROM periodo WHERE idPeriodo =?;	
			DELETE FROM evento WHERE idEvento=  ?;
			COMMIT TRANSACTION; 	
		</query>
	</eliminarEvento>
</CatalogoProveedores>