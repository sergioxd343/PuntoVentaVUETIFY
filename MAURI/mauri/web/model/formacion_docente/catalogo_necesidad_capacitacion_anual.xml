<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<CatalogoProveedores>

	<unidadAcademica>
		<query>
			SELECT cve_unidad_academica, nombre_unidad_academica FROM unidad_academica
		</query>
	</unidadAcademica>

	<tipoEvento>
		<query>
			SELECT cve_tipo_evento, nombre_tipo_evento FROM tipo_evento
		</query>
	</tipoEvento>

    <tablaEventos>
		<query>
			SELECT unidad_academica.nombre_unidad_academica, necesidad_capacitacion_anual.nombre_evento, tipo_evento.nombre_tipo_evento, necesidad_capacitacion_anual.fecha_inicio,
			necesidad_capacitacion_anual.fecha_temino, necesidad_capacitacion_anual.num_dias
			FROM necesidad_capacitacion_anual INNER JOIN
			unidad_academica ON unidad_academica.cve_unidad_academica = necesidad_capacitacion_anual.cve_unidad_academica INNER JOIN
            tipo_evento ON tipo_evento.cve_tipo_evento = necesidad_capacitacion_anual.cve_tipo_evento
		</query>
	</tablaEventos>

    <guardarEvento>
		<query>
			INSERT INTO necesidad_capacitacion_anual (cve_area_registro, cve_unidad_academica, cve_nivel_academico, cve_area, 
			cve_departamento, cve_empleado_responsable, cve_orientacion_evento, cve_tipo_evento, cve_tipo_capacitacion, cve_origen_evento,
			anio_ejercicio, necesidades_detectadas, nombre_evento, objetivo_evento, justificacion, otro_tipo_evento, proveedor, 
			costo_capacitacion, mes, fecha_inicio, fecha_temino, num_dias, num_horas_efectivas, participantes_ptc, participantes_laboratoristas, 
			participantes_administrativo, otros_participantes, total_participantes, total_hombres, total_mujeres, activo,
			fecha_registro, usuario_registro) 
			VALUES (1,?,1,1,1,1,1,?,1,1,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,1,?,1);
		</query>
	</guardarEvento>

    <academia>
		<query>
			SELECT     idAcademia, unidadAcademica 
			FROM         academia   
			ORDER BY idAcademia;
		</query>
	</academia>
    <ActualizarEvento>
		<query>
			BEGIN TRANSACTION
			UPDATE evento SET idAcademia = ?, nombreEventoCapacitacion = ?, objetivoEvento = ?, orientacionEvento= ?, justificacionEvento= ?, tipoEvento=?, otroTipoEvento=?, tipoPrograma=?, proveedorSugerido=?, costoCapacitacionSugerido=?, origenRecursoEvento=? WHERE idEvento = ?;
			UPDATE periodo SET mes = ?, fechaInicio = ?, fechaTermino=?, numDias=?,numHorasEfectivas=? WHERE idPeriodo = ?;
			COMMIT TRANSACTION
		</query>
	</ActualizarEvento>
    <eliminarEvento>
		<query>
			BEGIN TRANSACTION
			DELETE FROM periodo WHERE idPeriodo =?;	
			DELETE FROM evento WHERE idEvento=  ?;
			COMMIT TRANSACTION; 	
		</query>
	</eliminarEvento>
</CatalogoProveedores>